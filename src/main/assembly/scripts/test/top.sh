#!/bin/bash
cd `dirname $0`

#------------------------------------------------------------------------------------------------------------
# Set variables
#------------------------------------------------------------------------------------------------------------
serverPort=${app.server.port}

#------------------------------------------------------------------------------------------------------------
# Execute top command of the specified process
#------------------------------------------------------------------------------------------------------------
function executeTop() {
    PID=`ps -ef | grep java | grep -v "grep" | grep "$serverPort" | awk '{print $2}'`
    if [[ ! -z $PID  ]];then
        top -p $PID -n 20
    fi
}

#------------------------------------------------------------------------------------------------------------
# Execute functions
#------------------------------------------------------------------------------------------------------------
executeTop