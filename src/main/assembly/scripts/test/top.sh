#!/bin/bash
cd `dirname $0`

#------------------------------------------------------------------------------------------------------------
# Set variables
#------------------------------------------------------------------------------------------------------------
serverPort=${app.server.port}

#------------------------------------------------------------------------------------------------------------
# Check the existing process
#------------------------------------------------------------------------------------------------------------
function executeTop() {
    PID=`ps -ef | grep java | grep -v "grep" | grep "$serverPort" | awk '{print $2}'`
    if [[ ! -z $PID  ]];then
        top -p PID
    fi
}

#------------------------------------------------------------------------------------------------------------
# Execute functions
#------------------------------------------------------------------------------------------------------------
executeTop